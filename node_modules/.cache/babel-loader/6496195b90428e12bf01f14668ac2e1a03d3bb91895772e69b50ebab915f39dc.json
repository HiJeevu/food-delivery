{"ast":null,"code":"import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import AuthPage from'./components/AuthPage';import AdminDashboard from'./AdminDashboard';import UserStore from'./components/UserStore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[session,setSession]=useState(null);// 1. Check if user is already logged in on page load\nuseEffect(()=>{const savedSession=localStorage.getItem('session');if(savedSession){setSession(JSON.parse(savedSession));}},[]);// 2. Function to call when login is successful\nconst handleLoginSuccess=data=>{setSession(data);// This triggers the re-render to Dashboard\n};const handleLogout=()=>{localStorage.removeItem('session');setSession(null);};// 3. Conditional Rendering (The \"Redirect\" Logic)\nif(!session){return/*#__PURE__*/_jsx(AuthPage,{onLoginSuccess:handleLoginSuccess});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-vh-100 bg-light\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-dark bg-dark px-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"navbar-brand\",children:[\"Welcome, \",session.role==='admin'?'Admin':session.user.full_name||session.user.username]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger btn-sm\",onClick:handleLogout,children:\"Logout\"})]}),session.role==='admin'?/*#__PURE__*/_jsx(AdminDashboard,{}):/*#__PURE__*/_jsx(UserStore,{user:session.user})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","AuthPage","AdminDashboard","UserStore","jsx","_jsx","jsxs","_jsxs","App","session","setSession","savedSession","localStorage","getItem","JSON","parse","handleLoginSuccess","data","handleLogout","removeItem","onLoginSuccess","className","children","role","user","full_name","username","onClick"],"sources":["C:/Users/Admin/Desktop/practice/food-delivery/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport AuthPage from './components/AuthPage';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport UserStore from './components/UserStore';\r\n\r\nfunction App() {\r\n    const [session, setSession] = useState(null);\r\n\r\n    // 1. Check if user is already logged in on page load\r\n    useEffect(() => {\r\n        const savedSession = localStorage.getItem('session');\r\n        if (savedSession) {\r\n            setSession(JSON.parse(savedSession));\r\n        }\r\n    }, []);\r\n\r\n    // 2. Function to call when login is successful\r\n    const handleLoginSuccess = (data) => {\r\n        setSession(data); // This triggers the re-render to Dashboard\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('session');\r\n        setSession(null);\r\n    };\r\n\r\n    // 3. Conditional Rendering (The \"Redirect\" Logic)\r\n    if (!session) {\r\n        return <AuthPage onLoginSuccess={handleLoginSuccess} />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-vh-100 bg-light\">\r\n            {/* Header / Logout Bar */}\r\n            <nav className=\"navbar navbar-dark bg-dark px-4\">\r\n                <span className=\"navbar-brand\">\r\n                    Welcome, {session.role === 'admin' ? 'Admin' : session.user.full_name || session.user.username}\r\n                </span>\r\n                <button className=\"btn btn-outline-danger btn-sm\" onClick={handleLogout}>Logout</button>\r\n            </nav>\r\n\r\n            {/* Show Dashboard based on Role */}\r\n            {session.role === 'admin' ? (\r\n                <AdminDashboard />\r\n            ) : (\r\n                <UserStore user={session.user} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACX,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAW,YAAY,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CACpD,GAAIF,YAAY,CAAE,CACdD,UAAU,CAACI,IAAI,CAACC,KAAK,CAACJ,YAAY,CAAC,CAAC,CACxC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAK,kBAAkB,CAAIC,IAAI,EAAK,CACjCP,UAAU,CAACO,IAAI,CAAC,CAAE;AACtB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvBN,YAAY,CAACO,UAAU,CAAC,SAAS,CAAC,CAClCT,UAAU,CAAC,IAAI,CAAC,CACpB,CAAC,CAED;AACA,GAAI,CAACD,OAAO,CAAE,CACV,mBAAOJ,IAAA,CAACJ,QAAQ,EAACmB,cAAc,CAAEJ,kBAAmB,CAAE,CAAC,CAC3D,CAEA,mBACIT,KAAA,QAAKc,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAEhCf,KAAA,QAAKc,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC5Cf,KAAA,SAAMc,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,WAClB,CAACb,OAAO,CAACc,IAAI,GAAK,OAAO,CAAG,OAAO,CAAGd,OAAO,CAACe,IAAI,CAACC,SAAS,EAAIhB,OAAO,CAACe,IAAI,CAACE,QAAQ,EAC5F,CAAC,cACPrB,IAAA,WAAQgB,SAAS,CAAC,+BAA+B,CAACM,OAAO,CAAET,YAAa,CAAAI,QAAA,CAAC,QAAM,CAAQ,CAAC,EACvF,CAAC,CAGLb,OAAO,CAACc,IAAI,GAAK,OAAO,cACrBlB,IAAA,CAACH,cAAc,GAAE,CAAC,cAElBG,IAAA,CAACF,SAAS,EAACqB,IAAI,CAAEf,OAAO,CAACe,IAAK,CAAE,CACnC,EACA,CAAC,CAEd,CAEA,cAAe,CAAAhB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}