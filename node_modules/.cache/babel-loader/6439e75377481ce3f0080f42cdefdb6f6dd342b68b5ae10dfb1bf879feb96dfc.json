{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/practice/food-delivery/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AuthPage(_ref){let{onLoginSuccess}=_ref;const[isAdmin,setIsAdmin]=useState(false);const[isRegister,setIsRegister]=useState(false);const[form,setForm]=useState({name:'',email:'',username:'',password:''});const handleAuth=async e=>{e.preventDefault();let url=isAdmin?'http://localhost:5000/api/admin/login':'http://localhost:5000/api/user/login';if(isRegister)url='http://localhost:5000/api/user/register';try{const res=await axios.post(url,form);if(res.data.success){if(isRegister){alert(\"Registration successful! Please Login.\");setIsRegister(false);}else{localStorage.setItem('session',JSON.stringify(res.data));onLoginSuccess(res.data);}}}catch(err){alert(\"Auth Failed: \"+err.response.data.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center align-items-center vh-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 shadow-lg\",style:{width:'400px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group w-100\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm \".concat(!isAdmin?'btn-primary':'btn-outline-primary'),onClick:()=>{setIsAdmin(false);setIsRegister(false);},children:\"Customer\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm \".concat(isAdmin?'btn-primary':'btn-outline-primary'),onClick:()=>{setIsAdmin(true);setIsRegister(false);},children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-3\",children:isAdmin?'Admin Portal':isRegister?'Create Account':'Customer Login'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuth,children:[isRegister&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",className:\"form-control mb-2\",required:true,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:isAdmin?\"text\":\"email\",placeholder:isAdmin?\"Username\":\"Email\",className:\"form-control mb-2\",required:true,onChange:e=>isAdmin?setForm(_objectSpread(_objectSpread({},form),{},{username:e.target.value})):setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",className:\"form-control mb-3\",required:true,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{password:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark w-100 mb-2\",children:isRegister?'Register':'Login'})]}),!isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link w-100\",onClick:()=>setIsRegister(!isRegister),children:isRegister?'Already have an account? Login':'New customer? Register here'})]})});}","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AuthPage","_ref","onLoginSuccess","isAdmin","setIsAdmin","isRegister","setIsRegister","form","setForm","name","email","username","password","handleAuth","e","preventDefault","url","res","post","data","success","alert","localStorage","setItem","JSON","stringify","err","response","message","className","children","style","width","concat","onClick","onSubmit","type","placeholder","required","onChange","_objectSpread","target","value"],"sources":["C:/Users/Admin/Desktop/practice/food-delivery/client/src/components/AuthPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function AuthPage({ onLoginSuccess }) {\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    const [isRegister, setIsRegister] = useState(false);\r\n    const [form, setForm] = useState({ name: '', email: '', username: '', password: '' });\r\n\r\n    const handleAuth = async (e) => {\r\n        e.preventDefault();\r\n        let url = isAdmin ? 'http://localhost:5000/api/admin/login' : 'http://localhost:5000/api/user/login';\r\n        if (isRegister) url = 'http://localhost:5000/api/user/register';\r\n\r\n        try {\r\n            const res = await axios.post(url, form);\r\n            if (res.data.success) {\r\n                if (isRegister) {\r\n                    alert(\"Registration successful! Please Login.\");\r\n                    setIsRegister(false);\r\n                } else {\r\n                    localStorage.setItem('session', JSON.stringify(res.data));\r\n                    onLoginSuccess(res.data);\r\n                }\r\n            }\r\n        } catch (err) {\r\n            alert(\"Auth Failed: \" + err.response.data.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container d-flex justify-content-center align-items-center vh-100\">\r\n            <div className=\"card p-4 shadow-lg\" style={{ width: '400px' }}>\r\n                <div className=\"text-center mb-4\">\r\n                    <div className=\"btn-group w-100\">\r\n                        <button className={`btn btn-sm ${!isAdmin ? 'btn-primary' : 'btn-outline-primary'}`} onClick={() => {setIsAdmin(false); setIsRegister(false)}}>Customer</button>\r\n                        <button className={`btn btn-sm ${isAdmin ? 'btn-primary' : 'btn-outline-primary'}`} onClick={() => {setIsAdmin(true); setIsRegister(false)}}>Admin</button>\r\n                    </div>\r\n                    <h3 className=\"mt-3\">{isAdmin ? 'Admin Portal' : (isRegister ? 'Create Account' : 'Customer Login')}</h3>\r\n                </div>\r\n\r\n                <form onSubmit={handleAuth}>\r\n                    {isRegister && (\r\n                        <input type=\"text\" placeholder=\"Full Name\" className=\"form-control mb-2\" required\r\n                            onChange={e => setForm({...form, name: e.target.value})} />\r\n                    )}\r\n                    <input type={isAdmin ? \"text\" : \"email\"} placeholder={isAdmin ? \"Username\" : \"Email\"} className=\"form-control mb-2\" required\r\n                        onChange={e => isAdmin ? setForm({...form, username: e.target.value}) : setForm({...form, email: e.target.value})} />\r\n                    \r\n                    <input type=\"password\" placeholder=\"Password\" className=\"form-control mb-3\" required\r\n                        onChange={e => setForm({...form, password: e.target.value})} />\r\n                    \r\n                    <button className=\"btn btn-dark w-100 mb-2\">{isRegister ? 'Register' : 'Login'}</button>\r\n                </form>\r\n\r\n                {!isAdmin && (\r\n                    <button className=\"btn btn-link w-100\" onClick={() => setIsRegister(!isRegister)}>\r\n                        {isRegister ? 'Already have an account? Login' : 'New customer? Register here'}\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}